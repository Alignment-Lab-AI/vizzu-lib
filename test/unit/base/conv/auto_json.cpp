#include "base/conv/auto_json.h"

#include "../../util/test.h"
#include "chart/main/style.h"

using namespace test;
using namespace Vizzu::Styles;

struct MyObj {
	std::vector<int> mymem {1, 2, 3, 4, 5};
	std::vector<std::vector<int>> oth { {0, 1}, {2, 3} };
};

static auto tests =
    collection::add_suite("Conv::toJson")

        .add_case("ToJson Chart def test",
            []
            {
	            check() << Conv::toJson(Chart::def())
	                == R"RAW({"paddingTop":"0.416667em","paddingRight":"0.416667em","paddingBottom":"0.833333em","paddingLeft":"0.416667em","backgroundColor":"#FFFFFFFF","borderColor":"#FFFFFFFF","borderWidth":"0.000000","fontFamily":"Roboto, sans-serif","fontStyle":"normal","fontWeight":"normal","fontSize":"1.000000em","plot":{"paddingTop":"4.166667em","paddingRight":"3.750000em","paddingBottom":"5.000000em","paddingLeft":"6.666667em","backgroundColor":"#00000000","borderColor":"#00000000","borderWidth":"0.000000","marker":{"colorGradient":"#4171CDFF 0.000000, #8536C7FF 0.250000, #C33E7FFF 0.500000, #E9974EFF 0.750000, #F3F239FF 1.000000","colorPalette":"#4171CDFF #03AE71FF #F4941BFF #F4C204FF #D49664FF #F25456FF #9E67ABFF #BCA604FF #846E1CFF #FC763CFF #B462ACFF #F492FCFF #BC4A94FF #9C7EF4FF #9C52B4FF #6CA2FCFF #5C6EBCFF #7C868CFF #AC968CFF #4C7450FF #AC7A4CFF #7CAE54FF #4C7450FF #9C1A6CFF #AC3E94FF #B41204FF","minLightness":"-0.400000","maxLightness":"0.400000","lineMinWidth":"0.001000","lineMaxWidth":"0.010000","circleMinRadius":"0.005000","circleMaxRadius":"0.050000","rectangleSpacing":"null","borderWidth":"1.000000","borderOpacity":"1.000000","borderOpacityMode":"premultiplied","fillOpacity":"1.000000","guides":{"color":"#E8E8E8FF","lineWidth":"0.500000"},"label":{"paddingTop":"0.454545em","paddingRight":"0.454545em","paddingBottom":"0.454545em","paddingLeft":"0.454545em","fontFamily":"","fontStyle":"normal","fontWeight":"bold","fontSize":"0.916667em","color":"#00000000","textAlign":"center","backgroundColor":"#00000000","numberFormat":"grouped","maxFractionDigits":"3.000000","numberScale":"k,M,G,T,P,E,Z,Y","orientation":"horizontal","angle":"0.000000rad","position":"center","filter":"lightness(0.000000)","format":"measureFirst"}},"xAxis":{"color":"#CCCCCCFF","title":{"paddingTop":"1.714286em","paddingRight":"0.357143em","paddingBottom":"1.714286em","paddingLeft":"0.357143em","fontFamily":"","fontStyle":"normal","fontWeight":"normal","fontSize":"1.166667em","color":"#999999FF","textAlign":"left","backgroundColor":"#00000000","numberFormat":"prefixed","maxFractionDigits":"3.000000","numberScale":"k,M,G,T,P,E,Z,Y","position":"min-edge","side":"negative","vposition":"middle","vside":"upon","orientation":"horizontal"},"label":{"paddingTop":"0.666667em","paddingRight":"0.666667em","paddingBottom":"0.666667em","paddingLeft":"0.666667em","fontFamily":"","fontStyle":"normal","fontWeight":"normal","fontSize":"1.000000em","color":"#999999FF","textAlign":"left","backgroundColor":"#00000000","numberFormat":"prefixed","maxFractionDigits":"3.000000","numberScale":"k,M,G,T,P,E,Z,Y","orientation":"horizontal","angle":"0.000000rad","position":"min-edge","side":"negative"},"ticks":{"color":"#CCCCCCFF","lineWidth":"1.000000","length":"0.416667em","position":"outside"},"guides":{"color":"#EDEDEDFF","lineWidth":"1.000000"},"interlacing":{"color":"#F7F7F7FF"}},"yAxis":{"color":"#CCCCCCFF","title":{"paddingTop":"1.071429em","paddingRight":"0.357143em","paddingBottom":"1.071429em","paddingLeft":"0.357143em","fontFamily":"","fontStyle":"normal","fontWeight":"normal","fontSize":"1.166667em","color":"#999999FF","textAlign":"left","backgroundColor":"#00000000","numberFormat":"prefixed","maxFractionDigits":"3.000000","numberScale":"k,M,G,T,P,E,Z,Y","position":"min-edge","side":"upon","vposition":"end","vside":"positive","orientation":"horizontal"},"label":{"paddingTop":"0.666667em","paddingRight":"0.666667em","paddingBottom":"0.666667em","paddingLeft":"0.666667em","fontFamily":"","fontStyle":"normal","fontWeight":"normal","fontSize":"1.000000em","color":"#999999FF","textAlign":"left","backgroundColor":"#00000000","numberFormat":"prefixed","maxFractionDigits":"3.000000","numberScale":"k,M,G,T,P,E,Z,Y","orientation":"horizontal","angle":"0.000000rad","position":"min-edge","side":"negative"},"ticks":{"color":"#CCCCCCFF","lineWidth":"1.000000","length":"0.416667em","position":"outside"},"guides":{"color":"#EDEDEDFF","lineWidth":"1.000000"},"interlacing":{"color":"#F7F7F7FF"}},"areaColor":"#00000000","overflow":"hidden"},"legend":{"paddingTop":"0.833333em","paddingRight":"0.416667em","paddingBottom":"5.000000em","paddingLeft":"1.666667em","backgroundColor":"#00000000","borderColor":"#00000000","borderWidth":"0.000000","width":"8.333333em","maxWidth":"30.000000%","title":{"paddingTop":"0.857143em","paddingRight":"0.357143em","paddingBottom":"0.357143em","paddingLeft":"0.357143em","fontFamily":"","fontStyle":"normal","fontWeight":"normal","fontSize":"1.166667em","color":"#999999FF","textAlign":"left","backgroundColor":"#00000000","numberFormat":"prefixed","maxFractionDigits":"3.000000","numberScale":"k,M,G,T,P,E,Z,Y"},"label":{"paddingTop":"0.416667em","paddingRight":"0.416667em","paddingBottom":"0.416667em","paddingLeft":"0.416667em","fontFamily":"","fontStyle":"normal","fontWeight":"normal","fontSize":"1.000000em","color":"#999999FF","textAlign":"left","backgroundColor":"#00000000","numberFormat":"prefixed","maxFractionDigits":"3.000000","numberScale":"k,M,G,T,P,E,Z,Y"},"marker":{"type":"circle","size":"1.285714em"}},"title":{"paddingTop":"0.576923em","paddingRight":"0.384615em","paddingBottom":"0.000000px","paddingLeft":"0.384615em","fontFamily":"","fontStyle":"normal","fontWeight":"normal","fontSize":"2.166667em","color":"#494949FF","textAlign":"center","backgroundColor":"#00000000","numberFormat":"prefixed","maxFractionDigits":"3.000000","numberScale":"k,M,G,T,P,E,Z,Y"},"tooltip":{"fontFamily":"","fontStyle":"normal","fontWeight":"normal","fontSize":"12.000000px","backgroundColor":"#FFFFFFFF","borderColor":"#D8D8D8FF","borderWidth":"1.000000","layout":"multiLine","color":"#191919FF","shadowColor":"#0000000A","borderRadius":"3.000000","dropShadow":"3.000000","arrowSize":"8.000000","distance":"2.000000","seriesName":""},"logo":{"paddingTop":"47.500000%","paddingRight":"40.000000%","paddingBottom":"47.500000%","paddingLeft":"40.000000%","width":"3.186307em","filter":"color(#D8D8D8FF)"}})RAW";
            })

        .add_case("ToJson vector test",
            []
            {
	            check() << Conv::toJson(MyObj{})
	             == "{\"mymem\":[1,2,3,4,5],\"oth\":[[0,1],[2,3]]}";
            })
    ;